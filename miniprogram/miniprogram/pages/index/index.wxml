<view class="container">
  <!-- 筛选区域 -->
  <view class="filter-area">
    <picker mode="selector" range="{{countries}}" bindchange="handleCountriesChange">
      <view class="filter-item">国家: {{filters.country || '全部'}}</view>
    </picker>
    <picker mode="selector" range="{{genres}}" bindchange="handleGenreChange">
      <view class="filter-item">类型: {{filters.genre || '全部'}}</view>
    </picker>
    <picker mode="selector" range="{{categories}}" bindchange="handleCategoryChange">
      <view class="filter-item">分类: {{filters.category || '全部'}}</view>
    </picker>
  </view>

  <!-- 排序区域 -->
  <view class="sort-area">
    <view class="sort-item {{sort.field === 'year' ? 'active' : ''}}" data-field="year" data-order="{{sort.field === 'year' && sort.order === 'asc' ? 'desc' : 'asc'}}" bindtap="handleSortChange">
      年份 {{sort.field === 'year' ? (sort.order === 'asc' ? '↑' : '↓') : ''}}
    </view>
    <view class="sort-item {{sort.field === 'rating' ? 'active' : ''}}" data-field="rating" data-order="{{sort.field === 'rating' && sort.order === 'asc' ? 'desc' : 'asc'}}" bindtap="handleSortChange">
      评分 {{sort.field === 'rating' ? (sort.order === 'asc' ? '↑' : '↓') : ''}}
    </view>
  </view>

  <!-- 内容区域 -->
  <scroll-view scroll-y class="content-area" bindscrolltolower="onReachBottom">
    <view wx:for="{{mediaData.list}}" wx:key="id" class="media-item">
      <image src="{{item.thumbnail}}" mode="aspectFill"></image>
      <view class="info">
        <!-- 第一行：名称 -->
        <text class="title">{{item.title}}</text>
        <!-- 第二行：国家和分类 -->
        <text class="meta">{{item.category=="tv"?"剧集":"电影"}} ·  {{item.countries}}</text>
        <!-- 第三行：评分数据 -->
        <text class="rating">评分: {{item.rating}} ({{item.ratingCount || 0}}人评分)</text>
      </view>
    </view>

    <view wx:if="{{loading}}" class="loading">加载中...</view>
    <view wx:if="{{!loading && mediaData.list.length >= mediaData.total}}" class="no-more">
      没有更多数据了
    </view>
  </scroll-view>
</view>